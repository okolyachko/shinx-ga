<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Flutter tutorials" href="../flutter/flutter-list.html" /><link rel="prev" title="Passing the app state to the voice script" href="sending-data.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>Highlighting items with voice (Kotlin) - Alan AI docs</title>
      <link rel="stylesheet" href="../../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../../_static/pygments_dark.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    


<style>
  :root {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/custom.css" />
    <link rel="stylesheet" href="../../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b">
    <link rel="shortcut icon" type="image/x-icon" href="../../_static/favicon.png">
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-159851478-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-198019952-1');
	</script>
</head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>


    <link rel="shortcut icon" type="image/x-icon" href="../../_static/favicon.png">
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-159851478-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-198019952-1');
	</script>



<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="header-new">
<div class="header-content">
		<div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../_static/alan-logo.svg" alt="Logo"/></a>
			</div>
			
			</div>
			
			<div class="docs">
			
			<a href="../../index.html"> | Docs
			
			</div>
			</a>
		</div>
        
		
		<div class="right-block">
		<div class="search-box">   
			<form class="sidebar-search-container" method="get" action="../../search.html">
				<input class="sidebar-search" placeholder=Search name="q">
				<input type="hidden" name="check_keywords" value="yes">
				<input type="hidden" name="area" value="default">
			</form>
			
			
		</div>
		<div class="social">
			<a href="https://twitter.com/alanvoiceai" target="_blank" class="fa fa-twitter"></a>
			<a href="https://www.youtube.com/channel/UCrsg0b32nL6L2j5jG7uxOuw" target="_blank" class="fa fa-youtube-play"></a>
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa fa-slack"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa fa-github"></a>
        </div>
		</div>
		</div>
    </div>
<div class="page">
  
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../../_static/alan-logo.svg" alt="Logo"/></a>
			</div>
			
			</div>
			
			<div class="docs">
			
			<a href="../../index.html"> | Docs
			
			</div>
			</a>
		</div>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../contents.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/alan-logo.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../index.html">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/hiw/about.html">How Alan works</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/hiw/basics.html">Alan basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/hiw/infrastructure.html">Alan infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/hiw/deployment.html">Deployment options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/hiw/voice-processing.html">Voice processing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/guides/studio.html">Alan Studio</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/projects.html">Alan projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/scripts.html">Voice scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/versioning.html">Versions and environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/script-testing.html">Script testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/playground.html">Alan Playground</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/analytics.html">Voice analytics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/guides/billing.html">Billing and subscriptions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/button/overview.html">Alan button</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/button/customization.html">Customizing the voice assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/button/cohorts.html">Setting up cohorts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/button/activation.html">Starting and stopping dialog sessions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/examples/overview.html">Alan examples</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/examples/predefined-examples.html">Voice script examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/examples/code.html">Integration code examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/examples/github.html">Example apps on GitHub</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/video/overview.html">Videos</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/video/studio.html">Alan Studio videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/video/alan-platform.html">Alan Platform videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/video/integration.html">Integration videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/video/apps.html">Voice-enabled apps</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/additional/overview.html">Additional resources</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/additional/supported-platforms.html">Supported platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/additional/faq.html">FAQ</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../server-api/script-concepts.html">Script concepts</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/commands-and-responses.html">Commands and responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/slots.html">Slots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/contexts.html">Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/dynamic-entities.html">Dynamic entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/built-in-javascript-libraries.html">Built-in JavaScript libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/objects.html">Predefined script objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/lifecycle.html">Voice assistant lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/popups.html">Alan button popups</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../server-api/sending-data/communication.html">Communication with the app</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/sending-data/visual-state.html">Visual state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/sending-data/project-api.html">Project API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../server-api/user-data/overview.html">User data</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/user-data/events.html">User events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server-api/user-data/client-object.html">Client object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../server-api/api/api-reference.html">API reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../client-api/client-sdks.html">Alan Client SDKs</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../client-api/integration.html">Integrating with Alan</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../client-api/web/web-integration.html">Web</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label for="toctree-checkbox-13"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/web-api.html">Alan Web SDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/react.html">React</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/angular.html">Angular</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/vue.html">Vue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/ember.html">Ember</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/vanilla.html">JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/electron.html">Electron</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/server-side-rendering.html">Server-side rendering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/web/web-component.html">Web component</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/ios/ios-api.html">iOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/android/android-api.html">Android</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../client-api/cross-platform/overview.html">Cross-platform</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label for="toctree-checkbox-14"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/cross-platform/ionic.html">Ionic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/cross-platform/cordova.html">Apache Cordova</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/cross-platform/flutter.html">Flutter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/cross-platform/react-native.html">React Native</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../client-api/cross-platform/powerapps.html">Microsoft Power Apps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../client-api/methods/common-api.html">Client API methods</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../client-api/methods/handlers.html">Alan handlers</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label for="toctree-checkbox-15"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/methods/command-handler.html">onCommand handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/methods/state-handler.html">onButtonState handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../client-api/methods/event-handler.html">onEvent handler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos.html">How-tos</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../list-all.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label for="toctree-checkbox-16"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../list/web-list.html">Web</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label for="toctree-checkbox-17"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../list/adding-voice-to-a-web-application.html">Building a voice assistant for web</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../list/food-delivery-tutorial.html">Creating a voice-enabled food delivery app: complete tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label for="toctree-checkbox-18"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-create-app.html">Step 1: Create a web app</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-create-voice-assistant.html">Step 2: Create a voice assistant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-integrate.html">Step 3: Integrate Alan with the app</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-add-command.html">Step 4: Add a voice command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-alternatives.html">Step 5: Specify options and alternatives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-slots.html">Step 6: Pick out important data with slots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-several-items.html">Step 7: Add several items</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-display-items.html">Step 8: Send a command to display items in the cart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-slot-labels.html">Step 9: Use slot labels to display the order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-remove-items.html">Step 10: Remove items with voice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-highlight-items.html">Step 11: Highlight named items</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-checkout-context.html">Step 12: Add the checkout context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-time.html">Step 13: Get the delivery time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-comment.html">Step 14: Capture a comment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-populate-fields.html">Step 15: Populate fields with the delivery details</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-api-call.html">Step 16: Make an API call to get ingredients</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-visual-context.html">Step 17: Get the app visual context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-balance.html">Step 18: Get the balance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-start-dialog.html">Step 19: Let Alan start the dialog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../list/food-delivery-popup.html">Step 20: Show a popup next to the Alan button</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../list/using-dynamic-entities.html">Using dynamic entities</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../web/frameworks-list.html">Web frameworks</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label for="toctree-checkbox-19"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-react-app.html">Building a voice assistant for a React app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-angular-app.html">Building a voice assistant for an Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-vue-app.html">Building a voice assistant for a Vue app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-ember-app.html">Building a voice assistant for an Ember app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/integrating-electron-app.html">Building a voice assistant for an Electron app</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ios/ios-list.html">iOS</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label for="toctree-checkbox-20"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ios/integrating-swift.html">Building a voice assistant for an iOS app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/navigating-swift.html">Navigating between views in an iOS app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/sending-data-swift.html">Passing the app state to the voice script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/highlighting-swift.html">Highlighing items with voice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/triggering-info-swift.html">Triggering voice script actions without commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ios/greeting-swift.html">Playing a greeting in an iOS Swift app</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="android-list.html">Android</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label for="toctree-checkbox-21"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="integrating-java-kotlin.html">Building a voice assistant for an Android Java or Kotlin app</a></li>
<li class="toctree-l3"><a class="reference internal" href="navigating-kotlin.html">Navigating between screens in an Android app (Kotlin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="sending-data.html">Passing the app state to the voice script</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Highlighting items with voice (Kotlin)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../flutter/flutter-list.html">Flutter</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label for="toctree-checkbox-22"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../flutter/integrating-flutter.html">Building a voice assistant for a Flutter app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flutter/navigating-flutter.html">Navigating between views in a Flutter app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flutter/sending-data-flutter.html">Passing the app state to the voice script</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ionic/ionic-list.html">Ionic</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label for="toctree-checkbox-23"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ionic/integrating-angular.html">Building a voice assistant for an Ionic Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/navigating-angular.html">Navigating between tabs in an Ionic Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/sending-data-angular.html">Passing the app state to the voice script (Ionic Angular)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/integrating-react.html">Building a voice assistant for an Ionic React app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ionic/navigating-react.html">Navigating between tabs in an Ionic React app</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../react-native/react-native-list.html">React Native</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label for="toctree-checkbox-24"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../react-native/integrating-react-native.html">Building a voice assistant for a React Native app</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div id="orange-background"></div><div class="section" id="highlighting-items-with-voice-kotlin">
<h1>Highlighting items with voice (Kotlin)<a class="headerlink" href="#highlighting-items-with-voice-kotlin" title="Permalink to this headline">¶</a></h1>
<p>When you add a voice assistant to an app, you create a multimodal interface. This interface supports several methods of interaction: in our case, voice and the UI.</p>
<p>In an app with a multimodal interface, it is always a good idea to accompany voice commands with some visual effects in the app (if this is possible). For example, if your app displays a list of items, you can add a voice command that will let the user check what items are on the list. And to support such a voice command visually, you can highlight each named item while Alan goes through the list.</p>
<p>In this tutorial, we will add a list of items to our app and create a voice command to go through this list with voice. When Alan names an item in the list, this item will be highlighted in the app UI.</p>
<div class="section" id="what-you-will-learn">
<h2>What you will learn<a class="headerlink" href="#what-you-will-learn" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>How to go through the list of items with voice</p></li>
<li><p>How to accompany voice commands with visual effects in an app</p></li>
<li><p>How to use <a class="reference external" href="../../server-api/sending-data/visual-state.html">visual state</a> to send custom data to the voice script</p></li>
</ul>
</div>
<div class="section" id="what-you-will-need">
<h2>What you will need<a class="headerlink" href="#what-you-will-need" title="Permalink to this headline">¶</a></h2>
<p>For this tutorial, we will use the example Android app (Kotlin) integrated with Alan. To get the app: 1. Clone the Alan Android SDK repository to your computer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/alan-ai/alan-sdk-android.git
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p>Go to the app folder: <code class="docutils literal notranslate"><span class="pre">alan-sdk-android/examples/alan-example-integration-kotlin</span></code>.</p></li>
<li><p>Open the app in the IDE.</p></li>
<li><p>In the project, open the <code class="docutils literal notranslate"><span class="pre">MainActivity.kt</span></code> file and in <code class="docutils literal notranslate"><span class="pre">setProjectId</span></code>, replace the Alan SDK key with the key for your Alan Studio project:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle?)</span> <span class="p">{</span>
    <span class="p">....</span>
    <span class="kd">val</span> <span class="nv">alanConfig</span> <span class="o">=</span> <span class="n">AlanConfig</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
      <span class="p">.</span><span class="na">setProjectId</span><span class="p">(</span><span class="s">"b23c22fa051d81b47d43485dbc3cb44a2e956eca572e1d8b807a3e2338fdd0dc/stage"</span><span class="p">)</span>
      <span class="p">.</span><span class="na">build</span><span class="p">()</span>
    <span class="n">alan_button</span><span class="p">.</span><span class="na">initWithConfig</span><span class="p">(</span><span class="n">alanConfig</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-1-add-a-list-of-items-to-the-app">
<h2>Step 1: Add a list of items to the app<a class="headerlink" href="#step-1-add-a-list-of-items-to-the-app" title="Permalink to this headline">¶</a></h2>
<p>At this step, we need add a list of items to the main screen. We will create the items list with RecyclerView.</p>
<p>Let’s add a set of elements that will make the RecyclerView display our items:</p>
<ol class="arabic">
<li><p>First, add the RecyclerView Support Library to the project. In the project, open the <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code> file and add the following import statement to the <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> section:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="n">implementation</span> <span class="s2">"androidx.recyclerview:recyclerview:1.1.0"</span>
  <span class="n">implementation</span> <span class="s1">'app.alan:sdk:4.7.15'</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If necessary, update the Alan Android SDK version to the latest one. To get the version number, see the Releases section for the Alan Android SDK on GitHub.</p>
</div>
</li>
<li><p>Add the RecyclerView to the app layout. Open the <code class="docutils literal notranslate"><span class="pre">activity_main.xml</span></code> layout file and add the following section to it:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;androidx.recyclerview.widget.RecyclerView</span>
  <span class="na">android:id=</span><span class="s">"@+id/rvList"</span>
  <span class="na">android:layout_marginTop=</span><span class="s">"16dp"</span>
  <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@id/tvTitle"</span>
  <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
  <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
  <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
  <span class="na">android:layout_width=</span><span class="s">"0dp"</span>
  <span class="na">android:layout_height=</span><span class="s">"0dp"</span><span class="nt">/&gt;</span>
...
</pre></div>
</div>
</li>
<li><p>We also need to position the RecyclerView relatively other elements on the screen. In the <code class="docutils literal notranslate"><span class="pre">TextView</span></code> layout section, find the following line:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>app:layout_constraintBottom_toBottomOf="parent"
</pre></div>
</div>
<p>and replace it with:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>android:id="@+id/tvTitle"
android:layout_marginTop="64dp"
</pre></div>
</div>
<p>Now, the <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">Alan</span></code> text moves up, and the <code class="docutils literal notranslate"><span class="pre">RecyclerView</span></code> that will be holding the list of items is displayed below it.</p>
</li>
<li><p>Next, we need to lay out items in the RecyclerView. To do this, we will create a new layout file. In the project tree, right-click the <strong>layout</strong> folder and select <strong>New</strong> &gt; <strong>Layout Resource File</strong>. In the <strong>File Name</strong> field, enter <em>item_highlight</em> and click <strong>OK</strong>. Once the file is created, open it and replace its content with the following:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
  <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
  <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
  <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
  <span class="na">android:layout_marginTop=</span><span class="s">"64dp"</span>
  <span class="na">android:paddingStart=</span><span class="s">"16dp"</span>
  <span class="na">android:paddingEnd=</span><span class="s">"16dp"</span>
  <span class="na">android:paddingTop=</span><span class="s">"64dp"</span>
  <span class="na">android:paddingBottom=</span><span class="s">"64dp"</span>
  <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">&gt;</span>

 <span class="nt">&lt;TextView</span>
  <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span>
  <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
  <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
  <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
  <span class="na">android:id=</span><span class="s">"@+id/tvText"</span>
  <span class="na">android:textSize=</span><span class="s">"20sp"</span>
  <span class="na">android:gravity=</span><span class="s">"center_horizontal"</span>
  <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
   <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</pre></div>
</div>
<p>Here is what our project should look like:</p>
<img alt="../../_images/item-highlight-xml.png" src="../../_images/item-highlight-xml.png"/>
</li>
<li><p>Next, we will add the RecyclerView adapter to create the view holder for our items and handle the view logic. In the project, right-click the app node and select <strong>New</strong> &gt; <strong>Kotlin File/Class</strong>. In the <strong>Name</strong> field, enter <em>highlight/HighlightAdapter</em> and press <strong>Enter</strong> on the keyboard.</p>
<img alt="../../_images/highlight-adapter.png" src="../../_images/highlight-adapter.png"/>
<p>Replace the content of the created file with the following:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="k">package</span> <span class="nn">app.alan.exampleintegrationkotlin.highlihts</span>

<span class="k">import</span> <span class="nn">android.view.LayoutInflater</span>
<span class="k">import</span> <span class="nn">android.view.View</span>
<span class="k">import</span> <span class="nn">android.view.ViewGroup</span>
<span class="k">import</span> <span class="nn">androidx.recyclerview.widget.RecyclerView</span>
<span class="k">import</span> <span class="nn">app.alan.basicexample.R</span>
<span class="k">import</span> <span class="nn">kotlinx.android.synthetic.main.item_highlight.view.*</span>

<span class="kd">data</span> <span class="kd">class</span> <span class="nc">HighlightItem</span><span class="p">(</span>
  <span class="kd">val</span> <span class="nv">text</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
  <span class="kd">var</span> <span class="nv">isHighlighted</span><span class="p">:</span> <span class="kt">Boolean</span>
<span class="p">)</span>

<span class="kd">class</span> <span class="nc">HighlightViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">:</span> <span class="n">View</span><span class="p">)</span> <span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="na">ViewHolder</span><span class="p">(</span><span class="n">itemView</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">fun</span> <span class="nf">bind</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">HighlightItem</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">itemView</span><span class="p">.</span><span class="na">tvText</span><span class="p">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="na">text</span>

    <span class="c1">// Change the card background color if the item is highlighted</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">isHighlighted</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">itemView</span><span class="p">.</span><span class="na">setBackgroundColor</span><span class="p">(</span><span class="n">itemView</span><span class="p">.</span><span class="na">resources</span><span class="p">.</span><span class="na">getColor</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">color</span><span class="p">.</span><span class="na">colorPrimary</span><span class="p">))</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">itemView</span><span class="p">.</span><span class="na">setBackgroundColor</span><span class="p">(</span><span class="n">itemView</span><span class="p">.</span><span class="na">resources</span><span class="p">.</span><span class="na">getColor</span><span class="p">(</span><span class="n">android</span><span class="p">.</span><span class="na">R</span><span class="p">.</span><span class="na">color</span><span class="p">.</span><span class="na">white</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">HighlightAdapter</span><span class="p">(</span>
  <span class="kd">private</span> <span class="kd">val</span> <span class="nv">items</span><span class="p">:</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">HighlightItem</span><span class="o">&gt;</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">HighlightViewHolder</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onCreateViewHolder</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="n">ViewGroup</span><span class="p">,</span> <span class="n">viewType</span><span class="p">:</span> <span class="kt">Int</span><span class="p">):</span> <span class="n">HighlightViewHolder</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="nv">view</span> <span class="o">=</span>
      <span class="n">LayoutInflater</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="na">context</span><span class="p">).</span><span class="na">inflate</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">item_highlight</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HighlightViewHolder</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">getItemCount</span><span class="p">():</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">items</span><span class="p">.</span><span class="na">size</span>
  <span class="p">}</span>

  <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onBindViewHolder</span><span class="p">(</span><span class="n">holder</span><span class="p">:</span> <span class="n">HighlightViewHolder</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">holder</span><span class="p">.</span><span class="na">bind</span><span class="p">(</span><span class="n">items</span><span class="o">[</span><span class="n">position</span><span class="o">]</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">fun</span> <span class="nf">turnHighlight</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="kt">String</span><span class="p">):</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="nv">idx</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="na">indexOfFirst</span> <span class="p">{</span>
      <span class="nb">it</span><span class="p">.</span><span class="na">text</span> <span class="o">==</span> <span class="n">item</span>
    <span class="p">}</span>

    <span class="c1">// Remove highlighting from all items except the picked one</span>
    <span class="n">items</span><span class="p">.</span><span class="na">forEachIndexed</span> <span class="p">{</span> <span class="n">index</span><span class="p">,</span> <span class="n">highlightItem</span> <span class="o">-&gt;</span>
      <span class="n">highlightItem</span><span class="p">.</span><span class="na">isHighlighted</span> <span class="o">=</span> <span class="n">index</span> <span class="o">==</span> <span class="n">idx</span>
    <span class="p">}</span>
    <span class="n">notifyDataSetChanged</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">idx</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Let’s have a look at the code above. Beside the view holder, here we have the <code class="docutils literal notranslate"><span class="pre">HighlightAdapter</span></code> class with the <code class="docutils literal notranslate"><span class="pre">turnHighlight()</span></code> function responsible for highlighting items in the list. We will call this function later from the voice command in the Alan script.</p>
</li>
<li><p>The final step is to update our <code class="docutils literal notranslate"><span class="pre">MainActivity.kt</span></code> file. In the <code class="docutils literal notranslate"><span class="pre">MainActivity</span></code> class, declare dummy items that will be displayed in the list and initialize the adapter with this data:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
<span class="p">...</span>
  <span class="c1">// Create dummy items for the list</span>
  <span class="kd">private</span> <span class="kd">val</span> <span class="nv">dummyHighlightItems</span> <span class="o">=</span>
    <span class="n">listOf</span><span class="p">(</span><span class="s">"one"</span><span class="p">,</span> <span class="s">"two"</span><span class="p">,</span> <span class="s">"three"</span><span class="p">,</span> <span class="s">"four"</span><span class="p">,</span> <span class="s">"five"</span><span class="p">)</span>
    <span class="p">.</span><span class="na">map</span> <span class="p">{</span>
      <span class="n">HighlightItem</span><span class="p">(</span><span class="nb">it</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
    <span class="p">}</span>

  <span class="c1">// Init the adapter with dummy items</span>
  <span class="kd">private</span> <span class="kd">val</span> <span class="nv">highlightAdapter</span><span class="p">:</span> <span class="n">HighlightAdapter</span> <span class="o">=</span> <span class="n">HighlightAdapter</span><span class="p">(</span><span class="n">dummyHighlightItems</span><span class="p">)</span>
<span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">onCreate()</span></code> function, add the following two lines to set the layout manager and adapter:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
<span class="p">...</span>
  <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle?)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">.</span><span class="na">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
      <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">activity_main</span><span class="p">)</span>

      <span class="p">...</span>
      <span class="c1">// Set layout manager and adapter</span>
      <span class="n">rvList</span><span class="p">.</span><span class="na">layoutManager</span> <span class="o">=</span> <span class="n">LinearLayoutManager</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
      <span class="n">rvList</span><span class="p">.</span><span class="na">adapter</span> <span class="o">=</span> <span class="n">highlightAdapter</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<img alt="../../_images/layout-manager.png" src="../../_images/layout-manager.png"/>
<p>Run the app. You can how see the list of items added to the main screen filled with dummy items data.</p>
<img alt="../../_images/dummy-items.jpg" src="../../_images/dummy-items.jpg"/>
</li>
</ol>
</div>
<div class="section" id="step-2-send-information-about-items-to-the-voice-script">
<h2>Step 2: Send information about items to the voice script<a class="headerlink" href="#step-2-send-information-about-items-to-the-voice-script" title="Permalink to this headline">¶</a></h2>
<p>In our voice command, we will name items available in the list. For this reason, we need to send information about these items to the Alan script. To do this, we will use Alan’s <a class="reference external" href="../../server-api/sending-data/visual-state.html">visual state</a>.</p>
<p>In the project, open the <code class="docutils literal notranslate"><span class="pre">MainActivity.kt</span></code> file and in the <code class="docutils literal notranslate"><span class="pre">onCreate()</span></code> function of the <code class="docutils literal notranslate"><span class="pre">MainActivity</span></code> class, add the following:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle?)</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="c1">// Send the visual state with items data to the script</span>
  <span class="kd">val</span> <span class="nv">visualState</span> <span class="o">=</span> <span class="n">JSONObject</span><span class="p">()</span>
  <span class="kd">val</span> <span class="nv">itemJsonArray</span> <span class="o">=</span> <span class="n">JSONArray</span><span class="p">()</span>
  <span class="n">dummyHighlightItems</span><span class="p">.</span><span class="na">forEach</span> <span class="p">{</span>
    <span class="n">itemJsonArray</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="nb">it</span><span class="p">.</span><span class="na">text</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="n">visualState</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">"items"</span><span class="p">,</span> <span class="n">itemJsonArray</span><span class="p">)</span>
   <span class="n">alan_button</span><span class="p">.</span><span class="na">setVisualState</span><span class="p">(</span><span class="n">visualState</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here we add items from the list to a JSON array and send this array to the voice script with the
<a class="reference external" href="../../client-api/methods/common-api.html#setvisualstate">setVisualState</a> method of the Alan button. On the voice script side, we will access the items array by addressing the <code class="docutils literal notranslate"><span class="pre">p.visual.items</span></code> variable.</p>
</div>
<div class="section" id="step-3-add-a-voice-command-to-pass-through-the-items-list">
<h2>Step 3: Add a voice command to pass through the items list<a class="headerlink" href="#step-3-add-a-voice-command-to-pass-through-the-items-list" title="Permalink to this headline">¶</a></h2>
<p>Now let’s get back to Alan Studio and add the following voice command to our project:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="sb">`List all available items`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">items</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`The following items are available`</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">({</span><span class="nx">command</span><span class="o">:</span> <span class="s1">'highlight'</span><span class="p">,</span> <span class="nx">item</span><span class="o">:</span> <span class="nx">item</span><span class="p">});</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">item</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`There are no items on this screen`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Here is how this command works: when the user says: <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">all</span> <span class="pre">available</span> <span class="pre">items</span></code>, Alan checks what our app has passed in <code class="docutils literal notranslate"><span class="pre">visualState</span></code>. If the <code class="docutils literal notranslate"><span class="pre">p.visual.items</span></code> variable contains an array of items, Alan plays back: <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">following</span> <span class="pre">items</span> <span class="pre">are</span> <span class="pre">available</span></code>, sends the command to highlight the current item in the UI and names the item with voice. If the <code class="docutils literal notranslate"><span class="pre">p.visual.items</span></code> variable is empty, Alan plays back: <code class="docutils literal notranslate"><span class="pre">There</span> <span class="pre">are</span> <span class="pre">no</span> <span class="pre">items</span> <span class="pre">on</span> <span class="pre">this</span> <span class="pre">screen</span></code>.</p>
<p>You can test it: run the app and say: <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">all</span> <span class="pre">available</span> <span class="pre">items</span></code>. Alan will name all items added to the list.</p>
<p>However, the items are not highlighted in the UI yet. We will add a command handler to highlight items at the next step.</p>
</div>
<div class="section" id="step-4-add-the-command-handler-to-the-app">
<h2>Step 4: Add the command handler to the app<a class="headerlink" href="#step-4-add-the-command-handler-to-the-app" title="Permalink to this headline">¶</a></h2>
<p>When the user says: <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">all</span> <span class="pre">available</span> <span class="pre">items</span></code>, our app receives a set of commands to highlight current items. Let’s handle the <code class="docutils literal notranslate"><span class="pre">highlight</span></code> command on the app side and call the <code class="docutils literal notranslate"><span class="pre">turnHighlight()</span></code> function so
that a specific item is visually selected in the UI.</p>
<p>In the IDE, open the <code class="docutils literal notranslate"><span class="pre">MainActivity.kt</span></code> file and in the <code class="docutils literal notranslate"><span class="pre">MainActivity</span></code> class, inside the <code class="docutils literal notranslate"><span class="pre">onCreate</span></code> function, register the <a class="reference external" href="../../client-api/android/android-api.html#handle-events-from-the-alan-android-sdk">Alan callback</a> to handle events received from the Alan voice script:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle?)</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="c1">// Register the Alan callback to handle events from the Alan Studio script</span>
  <span class="n">alan_button</span><span class="p">.</span><span class="na">registerCallback</span><span class="p">(</span><span class="k">object</span> <span class="p">:</span> <span class="nc">AlanCallback</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// Register the command handler</span>
    <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onCommandReceived</span><span class="p">(</span><span class="n">eventCommand</span><span class="p">:</span> <span class="n">EventCommand?)</span> <span class="p">{</span>
      <span class="k">super</span><span class="p">.</span><span class="na">onCommandReceived</span><span class="p">(</span><span class="n">eventCommand</span><span class="p">)</span>

      <span class="c1">// Extract the command payload from the JSON object</span>
      <span class="kd">val</span> <span class="nv">commandObject</span> <span class="o">=</span> <span class="n">eventCommand</span><span class="o">?.</span><span class="na">data</span><span class="o">?.</span><span class="na">optJSONObject</span><span class="p">(</span><span class="s">"data"</span><span class="p">)</span>
      <span class="kd">val</span> <span class="nv">command</span> <span class="o">=</span> <span class="n">commandObject</span><span class="o">?.</span><span class="na">optString</span><span class="p">(</span><span class="s">"command"</span><span class="p">)</span>
      <span class="k">when</span> <span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="p">{</span>
        <span class="s">"highlight"</span> <span class="o">-&gt;</span> <span class="p">{</span>
          <span class="c1">// Extract the item to highlight and pass it to the adapter</span>
          <span class="kd">val</span> <span class="nv">itemToHighlight</span> <span class="o">=</span> <span class="n">commandObject</span><span class="p">.</span><span class="na">optString</span><span class="p">(</span><span class="s">"item"</span><span class="p">)</span>
          <span class="kd">val</span> <span class="nv">idx</span> <span class="o">=</span> <span class="n">highlightAdapter</span><span class="p">.</span><span class="na">turnHighlight</span><span class="p">(</span><span class="n">itemToHighlight</span><span class="p">)</span>
          <span class="n">rvList</span><span class="p">.</span><span class="na">scrollToPosition</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="k">else</span> <span class="o">-&gt;</span> <span class="p">{</span>
        <span class="n">Log</span><span class="p">.</span><span class="na">d</span><span class="p">(</span><span class="s">"Main"</span><span class="p">,</span> <span class="s">"Unknown command </span><span class="si">${</span><span class="n">command</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Now, when the app receives a command from the voice script, it triggers the <code class="docutils literal notranslate"><span class="pre">onCommandReceived()</span></code> function. The function extracts the command name from the passed JSON command object. If the command is <code class="docutils literal notranslate"><span class="pre">highlight</span></code>, the app gets the item name and calls the <code class="docutils literal notranslate"><span class="pre">turnHighlight()</span></code> function for this item; it also scrolls to the item position in the list.</p>
<p>You can test it: run the app and say: <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">all</span> <span class="pre">available</span> <span class="pre">items</span></code>. Alan will name all items added to the list, the list will be scrolled down as Alan goes through it, and each named item will be highlighted.</p>
<img alt="../../_images/highlighted.jpg" src="../../_images/highlighted.jpg"/>
</div>
<div class="section" id="what-you-finally-get">
<h2>What you finally get<a class="headerlink" href="#what-you-finally-get" title="Permalink to this headline">¶</a></h2>
<p>After you pass through this tutorial, you will have an Android app with a list of items on the main screen and will be able to check what items are added to this list with voice.</p>
<p>You can get an example of such an app from the Alan GitHub to make sure you have set up your app correctly: <a class="reference external" href="https://github.com/alan-ai/alan-sdk-android/tree/highlights/examples/alan-example-integration-kotlin">Highlights tutorial branch for the Android Kotlin example app</a>.</p>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../flutter/flutter-list.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Flutter tutorials</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sending-data.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Passing the app state to the voice script</div>
                
              </div>
            </a>
        </div>
        
	  <div class="alan-footer">
	  <div class="footer-logo-and-social-icons">
		<div class="footer-logo-and-text">
		<a class="footer-logo" aria-label="Link to alan.app" href="https://alan.app/"></a>
		</div>
		<div class="footer-text">
		<span>Alan<sup>®</sup> is a trademark of Alan AI, Inc.</span>
		<span>Handcrafted in Sunnyvale, California</span>
		</div>
		<div class="footer-other">
		<div class="footer-social">
			<a href="https://twitter.com/alanvoiceai" target="_blank" class="fa fa-twitter"></a>
			<a href="http://linkedin.com/company/alanvoiceai" target="_blank" class="fa fa-linkedin"></a>
			<a href="https://www.facebook.com/alanvoiceai/" target="_blank" class="fa fa-facebook"></a>
			<a href="https://www.instagram.com/alanvoiceai/" target="_blank" class="fa fa-instagram"></a>
			<a href="https://www.youtube.com/channel/UCrsg0b32nL6L2j5jG7uxOuw" target="_blank" class="fa fa-youtube-play"></a>
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa fa-slack"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa fa-github"></a>
        </div>
		</div>
	  </div>
	  <div class="footer-badges">
	  <div class="footer-badges-info">
	  <div class="footer-badges-info-icon"></div>
	  <div>Download Alan Playground to see how Conversational Voice Experiences can add value to your application or test your Alan Studio Projects.</div>
	  </div>
	  
	  </div>
	  <div class="footer-badges-imgs">
	  <a class="footer_badges_imgs_app-store" href="https://apps.apple.com/ca/app/alan-playground/id1474478921"></a>
	  <a class="footer_badges_imgs_google-play" href="https://play.google.com/store/apps/details?id=app.alan.playground"></a>
	  </div>
	  
	  </div>
	  
      </footer>
	
    </div>
	
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Highlighting items with voice (Kotlin)</a><ul>
<li><a class="reference internal" href="#what-you-will-learn">What you will learn</a></li>
<li><a class="reference internal" href="#what-you-will-need">What you will need</a></li>
<li><a class="reference internal" href="#step-1-add-a-list-of-items-to-the-app">Step 1: Add a list of items to the app</a></li>
<li><a class="reference internal" href="#step-2-send-information-about-items-to-the-voice-script">Step 2: Send information about items to the voice script</a></li>
<li><a class="reference internal" href="#step-3-add-a-voice-command-to-pass-through-the-items-list">Step 3: Add a voice command to pass through the items list</a></li>
<li><a class="reference internal" href="#step-4-add-the-command-handler-to-the-app">Step 4: Add the command handler to the app</a></li>
<li><a class="reference internal" href="#what-you-finally-get">What you finally get</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  
  </main>
</div>
</div>

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/custom.js"></script>
    <script src="../../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>