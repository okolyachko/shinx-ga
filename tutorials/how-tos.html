<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Alan tutorials" href="list-all.html" /><link rel="prev" title="onEvent handler" href="../client-api/methods/event-handler.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>How-Tos - Docs documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    


<style>
  :root {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/custom.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b">
    <link rel="shortcut icon" type="image/x-icon" href="../_static/favicon.png">
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-159851478-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-198019952-1');
	</script>
</head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>


    <link rel="shortcut icon" type="image/x-icon" href="../_static/favicon.png">
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-159851478-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-198019952-1');
	</script>



<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>


<div class="header-new">
<div class="header-content">
		<div class="logo-part">
			<div class="logo"> 
			
             <div class="sidebar-logo-container">
				<a href="https://alan.app"><img class="sidebar-logo" src="../_static/alan-logo.svg" alt="Logo"/></a>
			</div>
			
			</div>
			
			<div class="docs">
			
			<a href="https://alan.app/docs"> | Docs
			
			</div>
			</a>
		</div>
        
		
		<div class="right-block">
		<div class="search-box">   
			<form class="sidebar-search-container" method="get" action="../search.html">
				<input class="sidebar-search" placeholder=Search name="q">
				<input type="hidden" name="check_keywords" value="yes">
				<input type="hidden" name="area" value="default">
			</form>
			
			
		</div>
		<div class="social">
			<a href="https://twitter.com/alanvoiceai" target="_blank" class="fa fa-twitter"></a>
			<a href="https://www.youtube.com/channel/UCrsg0b32nL6L2j5jG7uxOuw" target="_blank" class="fa fa-youtube-play"></a>
			<a href="https://alanaigroup.slack.com/join/shared_invite/enQtNzMzOTE5MTIwMjg4LWI4ZmM4MTNkMTdmY2M0ZWEwODlmZDQ5Y2ZkMjUzNmMyZDJiMzA0Y2M1NDdhYzZjYWFlZTA5NjM4OTU0MWFmNWU#/shared-invite/email" target="_blank" class="fa fa-slack"></a>
			<a href="https://github.com/alan-ai" target="_blank" class="fa fa-github"></a>
        </div>
		</div>
		</div>
    </div>
<div class="page">
  
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../contents.html"><div class="brand">Docs  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../contents.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/alan-logo.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../index.html">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/hiw/about.html">How Alan works</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/hiw/basics.html">Alan basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/hiw/infrastructure.html">Alan infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/hiw/deployment.html">Deployment options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/hiw/voice-processing.html">Voice processing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/guides/studio.html">Alan Studio</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/projects.html">Alan projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/scripts.html">Voice scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/versioning.html">Versions and environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/script-testing.html">Script testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/playground.html">Alan Playground</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/analytics.html">Voice analytics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/guides/billing.html">Billing and subscriptions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/button/overview.html">Alan button</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/button/customization.html">Customizing the voice assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/button/cohorts.html">Setting up cohorts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/button/activation.html">Starting and stopping dialog sessions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/examples/overview.html">Alan examples</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/examples/predefined-examples.html">Voice script examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/examples/code.html">Integration code examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/examples/github.html">Example apps on GitHub</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/video/overview.html">Videos</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/video/studio.html">Alan Studio videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/video/alan-platform.html">Alan Platform videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/video/integration.html">Integration videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/video/apps.html">Voice-enabled apps</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/additional/overview.html">Additional resources</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/additional/supported-platforms.html">Supported platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/additional/faq.html">FAQ</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../server-api/script-concepts.html">Script concepts</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../server-api/commands-and-responses.html">Commands and responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/slots.html">Slots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/contexts.html">Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/dynamic-entities.html">Dynamic entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/built-in-javascript-libraries.html">Built-in JavaScript libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/objects.html">Predefined script objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/lifecycle.html">Voice assistant lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/popups.html">Alan button popups</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../server-api/sending-data/communication.html">Communication with the app</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../server-api/sending-data/visual-state.html">Visual state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../server-api/sending-data/project-api.html">Project API</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../server-api/user-data/overview.html">User data</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../server-api/user-data/events.html">User events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../server-api/user-data/client-object.html">Client object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../server-api/api/api-reference.html">API reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../client-api/client-sdks.html">Alan Client SDKs</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../client-api/integration.html">Integrating with Alan</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../client-api/web/web-integration.html">Web</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label for="toctree-checkbox-13"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/web-api.html">Alan Web SDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/react.html">React</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/angular.html">Angular</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/vue.html">Vue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/ember.html">Ember</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/vanilla.html">JavaScript</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/electron.html">Electron</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/server-side-rendering.html">Server-side rendering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/web/web-component.html">Web component</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../client-api/ios/ios-api.html">iOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client-api/android/android-api.html">Android</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../client-api/cross-platform/overview.html">Cross-platform</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label for="toctree-checkbox-14"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../client-api/cross-platform/ionic.html">Ionic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/cross-platform/cordova.html">Apache Cordova</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/cross-platform/flutter.html">Flutter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/cross-platform/react-native.html">React Native</a></li>
<li class="toctree-l4"><a class="reference internal" href="../client-api/cross-platform/powerapps.html">Microsoft Power Apps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../client-api/methods/common-api.html">Client API methods</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../client-api/methods/handlers.html">Alan handlers</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label for="toctree-checkbox-15"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../client-api/methods/command-handler.html">onCommand handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client-api/methods/state-handler.html">onButtonState handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client-api/methods/event-handler.html">onEvent handler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">How-tos</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="list-all.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label for="toctree-checkbox-16"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="list/web-list.html">Web</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label for="toctree-checkbox-17"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="list/adding-voice-to-a-web-application.html">Building a voice assistant for web</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="list/food-delivery-tutorial.html">Creating a voice-enabled food delivery app: complete tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label for="toctree-checkbox-18"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-create-app.html">Step 1: Create a web app</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-create-voice-assistant.html">Step 2: Create a voice assistant</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-integrate.html">Step 3: Integrate Alan with the app</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-add-command.html">Step 4: Add a voice command</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-alternatives.html">Step 5: Specify options and alternatives</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-slots.html">Step 6: Pick out important data with slots</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-several-items.html">Step 7: Add several items</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-display-items.html">Step 8: Send a command to display items in the cart</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-slot-labels.html">Step 9: Use slot labels to display the order</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-remove-items.html">Step 10: Remove items with voice</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-highlight-items.html">Step 11: Highlight named items</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-checkout-context.html">Step 12: Add the checkout context</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-time.html">Step 13: Get the delivery time</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-comment.html">Step 14: Capture a comment</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-populate-fields.html">Step 15: Populate fields with the delivery details</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-api-call.html">Step 16: Make an API call to get ingredients</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-visual-context.html">Step 17: Get the app visual context</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-balance.html">Step 18: Get the balance</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-start-dialog.html">Step 19: Let Alan start the dialog</a></li>
<li class="toctree-l4"><a class="reference internal" href="list/food-delivery-popup.html">Step 20: Show a popup next to the Alan button</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="list/using-dynamic-entities.html">Using dynamic entities</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="web/frameworks-list.html">Web frameworks</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label for="toctree-checkbox-19"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="web/integrating-react-app.html">Building a voice assistant for a React app</a></li>
<li class="toctree-l3"><a class="reference internal" href="web/integrating-angular-app.html">Building a voice assistant for an Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="web/integrating-vue-app.html">Building a voice assistant for a Vue app</a></li>
<li class="toctree-l3"><a class="reference internal" href="web/integrating-ember-app.html">Building a voice assistant for an Ember app</a></li>
<li class="toctree-l3"><a class="reference internal" href="web/integrating-electron-app.html">Building a voice assistant for an Electron app</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="ios/ios-list.html">iOS</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label for="toctree-checkbox-20"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="ios/integrating-swift.html">Building a voice assistant for an iOS app</a></li>
<li class="toctree-l3"><a class="reference internal" href="ios/navigating-swift.html">Navigating between views in an iOS app</a></li>
<li class="toctree-l3"><a class="reference internal" href="ios/sending-data-swift.html">Passing the app state to the voice script</a></li>
<li class="toctree-l3"><a class="reference internal" href="ios/highlighting-swift.html">Highlighing items with voice</a></li>
<li class="toctree-l3"><a class="reference internal" href="ios/triggering-info-swift.html">Triggering voice script actions without commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="ios/greeting-swift.html">Playing a greeting in an iOS Swift app</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="android/android-list.html">Android</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label for="toctree-checkbox-21"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="android/integrating-java-kotlin.html">Building a voice assistant for an Android Java or Kotlin app</a></li>
<li class="toctree-l3"><a class="reference internal" href="android/navigating-kotlin.html">Navigating between screens in an Android app (Kotlin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="android/sending-data.html">Passing the app state to the voice script</a></li>
<li class="toctree-l3"><a class="reference internal" href="android/highlighting-kotlin.html">Highlighting items with voice (Kotlin)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="flutter/flutter-list.html">Flutter</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label for="toctree-checkbox-22"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="flutter/integrating-flutter.html">Building a voice assistant for a Flutter app</a></li>
<li class="toctree-l3"><a class="reference internal" href="flutter/navigating-flutter.html">Navigating between views in a Flutter app</a></li>
<li class="toctree-l3"><a class="reference internal" href="flutter/sending-data-flutter.html">Passing the app state to the voice script</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="ionic/ionic-list.html">Ionic</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label for="toctree-checkbox-23"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="ionic/integrating-angular.html">Building a voice assistant for an Ionic Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="ionic/navigating-angular.html">Navigating between tabs in an Ionic Angular app</a></li>
<li class="toctree-l3"><a class="reference internal" href="ionic/sending-data-angular.html">Passing the app state to the voice script (Ionic Angular)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ionic/integrating-react.html">Building a voice assistant for an Ionic React app</a></li>
<li class="toctree-l3"><a class="reference internal" href="ionic/navigating-react.html">Navigating between tabs in an Ionic React app</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div id="orange-background"></div><div class="section" id="how-tos">
<h1>How-Tos<a class="headerlink" href="#how-tos" title="Permalink to this headline">¶</a></h1>
<p>Here you can find answers to the most common questions that you may have when building a voice assistant with Alan.</p>
<details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send data to a client application<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To send data to a client application, use the <a class="reference external" href="../server-api/commands-and-responses.html#play">play()</a> function. In the   function, define the JSON object of the command to be sent:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s2">"Change color to $(C red|green|blue)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">({</span><span class="nx">command</span><span class="o">:</span> <span class="s2">"setColor"</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">C</span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p class="card-text">In the client application, you need handle commands received from the voice script. For details, see <a class="reference external" href="../server-api/commands-and-responses.html#sending-commands-to-the-app">Sending commands to the app</a>.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to capture the entire user input<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to get the entire utterance from the user input, you can use a <a class="reference external" href="../server-api/slots.html#regular-expressions">greedy RegEx syntax</a> in a slot, for example: <code class="docutils literal notranslate"><span class="pre">"$(I*</span> <span class="pre">.+)"</span></code>. Such a RegEx pattern matches any string with one or more characters.</p>
<p class="card-text">Consider the following example: you need to get the user feedback and send this information to your app. You can add the following command to the voice script:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s2">"I want to give feedback"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Thank you! What do you think about our product?"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">feedback</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">userInput</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">({</span><span class="nx">command</span><span class="o">:</span> <span class="s2">"feedback"</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">feedback</span><span class="p">});</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your feedback is: </span><span class="si">${</span><span class="nx">feedback</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">userInput</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
   <span class="nx">intent</span><span class="p">(</span><span class="s2">"$(I* .+)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">I</span><span class="p">));</span>
<span class="p">})</span>
</pre></div>
</div>
<p class="card-text">Here, after the user says: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">give</span> <span class="pre">feedback</span></code>, Alan offers the user to share it, activates the <code class="docutils literal notranslate"><span class="pre">userInput</span></code> context and stops the script execution until the feedback is received. The user utterance (any type of it) is captured by <code class="docutils literal notranslate"><span class="pre">"$(I*</span> <span class="pre">.+)"</span></code> added to the intent in the context. Alan exits it the context, sends the command with the feedback information to the app and plays the feedback to the user.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to create slots with item names from arrays<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">When designing a dialog for a voice assistant, you may want to let the user name items listed in an array when a voice command is given. To achieve this, you can create a slot with item names and use this slot in the command pattern. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Cheese Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Double Cheese Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">12.00</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Bacon Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">11.50</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Hawaian Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">9.99</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Mexican Spicy Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">12.50</span><span class="p">},</span>
<span class="p">];</span>

<span class="c1">// Creates a list of items to be used in a slot: Cheese Burger~Cheese Burger|Double Cheese Burger~Double Cheese Burger|Bacon Burger~Bacon Burger|Hawaian Burger~Hawaian Burger|Mexican Spicy Burger~Mexican Spicy Burger</span>
<span class="kd">const</span> <span class="nx">menuItemsPattern</span> <span class="o">=</span> <span class="nx">menuItems</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">~</span><span class="si">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>

<span class="nx">intent</span><span class="p">(</span>
    <span class="sb">`How much (is|does) (a|the|) $(MENU_ITEM~ </span><span class="si">${</span><span class="nx">menuItemsPattern</span><span class="si">}</span><span class="sb">) (cost|)`</span><span class="p">,</span>
    <span class="sb">`What is the (price|cost) (on|for|of) (a|the|) $(MENU_ITEM~ </span><span class="si">${</span><span class="nx">menuItemsPattern</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span>
    <span class="sb">`How much (is|does) (a|the|) $(UNAVAILABLE_ITEM* .*) (cost|)`</span><span class="p">,</span>
    <span class="sb">`What is the (price|cost) (on|for|of) (a|the|) $(UNAVAILABLE_ITEM* .*)`</span><span class="p">,</span>
    <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">UNAVAILABLE_ITEM</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">UNAVAILABLE_ITEM</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="sb"> is unavailable`</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">requestedItem</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">MENU_ITEM</span><span class="p">.</span><span class="nx">label</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
            <span class="kd">const</span> <span class="nx">itemOnMenu</span> <span class="o">=</span> <span class="nx">menuItems</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">m</span> <span class="p">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">requestedItem</span><span class="p">));</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">requestedItem</span><span class="si">}</span><span class="sb"> costs $</span><span class="si">${</span><span class="nx">itemOnMenu</span><span class="p">.</span><span class="nx">price</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
<p class="card-text">In the example above, we are using a <a class="reference external" href="../server-api/slots.html#slots-with-fuzzy-matching">slot with fuzzy matching</a> to capture the item name. Each item name in the slot is accompanied with the label. Now, thanks to fuzzy matching, Alan can capture different variants of item names, even if they are close but not exact:</p>
<ul class="simple">
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">much</span> <span class="pre">does</span> <span class="pre">Double</span> <span class="pre">Cheese</span> <span class="pre">cost?</span></code></p></li>
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">much</span> <span class="pre">does</span> <span class="pre">Double</span> <span class="pre">Cheese</span> <span class="pre">Burger</span> <span class="pre">cost?</span></code></p></li>
</ul>
<p class="card-text">When such a pattern is matched, the <code class="docutils literal notranslate"><span class="pre">value</span></code> field of the <code class="docutils literal notranslate"><span class="pre">MENU_ITEM</span></code> slot will contain the user input, and the <code class="docutils literal notranslate"><span class="pre">.label</span></code> field will contain the item name provided in the label. In this voice command, <code class="docutils literal notranslate"><span class="pre">p.MENU_ITEM.label</span></code> is used to tell about the item price.</p>
<p class="card-text">To capture any name of the item that is not on the menu, we are using <a class="reference external" href="../server-api/slots.html#regular-expressions">RegEx</a> for the <code class="docutils literal notranslate"><span class="pre">UNAVAILABLE_ITEM</span></code> slot.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to run a query with words from the user input<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to run a query with user’s words, you can add a slot with a <a class="reference external" href="../server-api/slots.html#regular-expressions">greedy RegEx syntax</a> to the command pattern to capture the user’s input.</p>
<p class="card-text">In the example below, when the user asks to translate a word or phrase, Alan captures this word or phrase with a greedy RegEx, makes an API call to an external translation service and plays the result with the Italian accent: <code class="docutils literal notranslate"><span class="pre">p.play(voice('it'),</span> <span class="pre">response.translated)</span></code>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s1">'(How|) (do you|would you|to|) say $(W* .+)?'</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">translate</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">W</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="p">})</span>

<span class="kd">function</span> <span class="nx">translate</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">apiCall</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="s1">'translate'</span><span class="p">,</span> <span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">srcLang</span><span class="o">:</span> <span class="s1">'en'</span><span class="p">,</span> <span class="nx">dstLang</span><span class="o">:</span> <span class="s1">'it'</span><span class="p">},</span> <span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">voice</span><span class="p">(</span><span class="s1">'it'</span><span class="p">),</span> <span class="nx">response</span><span class="p">.</span><span class="nx">translated</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">apiCall</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">param</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">jsp</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s2">"https://studio.alan.app/api_playground/"</span> <span class="o">+</span> <span class="nx">command</span><span class="p">,</span>
        <span class="nx">strictSSL</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
        <span class="nx">json</span><span class="o">:</span> <span class="nx">param</span><span class="p">,</span>
        <span class="nx">timeout</span><span class="o">:</span> <span class="mf">3000</span><span class="p">,</span>
    <span class="p">};</span>
    <span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">jsp</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="o">||</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'(Sorry|) something went wrong (with the server|)'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to use predefined slots<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to capture specific values from the user input, for example, dates or numbers, you can add <a class="reference external" href="../server-api/slots.html#predefined-slots">predefined slots</a> to voice commands:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="sb">`I have a meeting with $(NAME) from $(ORG) $(DATE) (at|) $(TIME) (in|at|near|) $(LOC)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Adding to your schedule: Meeting </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">NAME</span><span class="si">}</span><span class="sb"> from </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">ORG</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">DATE</span><span class="si">}</span><span class="sb"> at </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">TIME</span><span class="si">}</span><span class="sb"> in the </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">LOC</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to get the right answer from the user<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">In some cases, the user’s answer may be not precise. As a result, you will not be able to get from the user input the data you need for the subsequent dialog flow. To get the necessary information, you can use an <a class="reference external" href="../server-api/contexts.html#using-async-contexts">async context</a> in the voice script.</p>
<p class="card-text">Consider the following example: you need to get the coffee type from the user input, but instead the user just says: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">want</span> <span class="pre">a</span> <span class="pre">coffee</span></code>. You can add the following command to the voice script:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s2">"I want a coffee"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"What coffee do you prefer?"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">coffee</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">whatCoffee</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your </span><span class="si">${</span><span class="nx">coffee</span><span class="si">}</span><span class="sb"> coffee will be ready in a moment`</span><span class="p">);</span>
<span class="p">});</span>

 <span class="kd">const</span> <span class="nx">whatCoffee</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">intent</span><span class="p">(</span><span class="s2">"$(COFFEE Black|Americano|Latte|Cappuccino|Expresso|Macchiato)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">COFFEE</span><span class="p">));</span>
 <span class="p">})</span>
</pre></div>
</div>
<p class="card-text">Here, once you receive an answer that should be more specific, Alan plays: <code class="docutils literal notranslate"><span class="pre">What</span> <span class="pre">coffee</span> <span class="pre">do</span> <span class="pre">you</span> <span class="pre">prefer?</span></code>, activates the <code class="docutils literal notranslate"><span class="pre">whatCoffee</span></code> context and stops the script execution until the user gives the necessary answer. If the user answer matches one of the values listed in the <code class="docutils literal notranslate"><span class="pre">COFFEE</span></code> <a class="reference external" href="../server-api/slots.html">slot</a>, Alan exits the context, and the coffee type is returned. Alan then plays: <code class="docutils literal notranslate"><span class="pre">Your</span> <span class="pre">${coffee}</span> <span class="pre">coffee</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">ready</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">moment</span></code> with the coffee type obtained.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to handle unexpected voice commands from the user<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">The user may give an answer of the type inappropriate for you. In this case, you can lock the user in the context with the <a class="reference external" href="../server-api/contexts.html#prompting-and-handling-user-errors">fallback()</a> function until the necessary user input is received.</p>
<p class="card-text">Consider the following example: a voice script for a simple math checker offers the user to add two random numbers.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s2">"Check my math"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mf">10</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mf">10</span><span class="p">)</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`How much </span><span class="si">${</span><span class="nx">a</span><span class="si">}</span><span class="sb"> plus </span><span class="si">${</span><span class="nx">b</span><span class="si">}</span><span class="sb">?`</span><span class="p">)</span>
    <span class="kd">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">getNumber</span><span class="p">)</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your answer </span><span class="si">${</span><span class="nx">sum</span><span class="si">}</span><span class="sb"> is </span><span class="si">${</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">==</span><span class="nx">sum</span><span class="o">?</span> <span class="s1">'correct'</span><span class="o">:</span> <span class="s1">'incorrect'</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">getNumber</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">intent</span><span class="p">(</span><span class="s2">"$(NUMBER)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">NUMBER</span><span class="p">.</span><span class="nx">number</span><span class="p">))</span>

    <span class="nx">fallback</span><span class="p">(</span><span class="s2">"You have to say a number"</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p class="card-text">Here, after Alan asks a question, it activates the <code class="docutils literal notranslate"><span class="pre">getNumber</span></code> context and stops the script execution until the answer of the appropriate type is received. The answer must be captured by the <a class="reference external" href="../server-api/slots.html#number">NUMBER</a> predefined slot: in this case, Alan exits it the context, and the user answer is returned. If the answer is of any other type, the user remains in the context. To instruct the user on the rules, Alan plays: <code class="docutils literal notranslate"><span class="pre">You</span> <span class="pre">have</span> <span class="pre">to</span> <span class="pre">say</span> <span class="pre">a</span> <span class="pre">number</span></code>.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to allow adding comments with voice<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you want to let users add comments with voice, you can use the following command:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">commentContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">intent</span><span class="p">(</span><span class="sb">`$(I* (.+))`</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">I</span><span class="p">))</span>
<span class="p">});</span>

<span class="nx">intent</span><span class="p">(</span><span class="sb">`(Add a comment|Comment|Add comment)`</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span><span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Okay, what comment would you like to add?"</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">comment</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">commentContext</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your comment is: </span><span class="si">${</span><span class="nx">comment</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p class="card-text">Here, after the user says: <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">a</span> <span class="pre">comment</span></code>, Alan plays: <code class="docutils literal notranslate"><span class="pre">Okay,</span> <span class="pre">what</span> <span class="pre">comment</span> <span class="pre">would</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">to</span> <span class="pre">add?</span></code>, activates the <code class="docutils literal notranslate"><span class="pre">commentContext</span></code> context and stops the script execution until a comment is received. The comment is captured with the <code class="docutils literal notranslate"><span class="pre">$(I*</span> <span class="pre">(.+))</span></code> RegEx expression added to the intent in the context. The comment is then played to the user.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to iterate over a list of objects (back and forward)<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">You may need to add a voice command that will allow the user to iterate over a list of objects. This can be the case, for example, if you are building a voice assistant for a shopping or ordering app and want the user to pick something from the products list.</p>
<p class="card-text">Consider the following example: you want your voice assistant to name all available fruits, allow the user to pick some and save them to the user’s favorites list.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"apple"</span><span class="p">,</span> <span class="s2">"orange"</span><span class="p">,</span> <span class="s2">"lemon"</span><span class="p">,</span> <span class="s2">"mango"</span><span class="p">,</span> <span class="s2">"banana"</span><span class="p">,</span> <span class="s2">"avocado"</span><span class="p">,</span> <span class="s2">"kiwi"</span><span class="p">]</span>

<span class="nx">intent</span><span class="p">(</span><span class="s2">"(I want to|) (select|choose) fruits"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Iterate over the list of fruits and select your favorite one. To select fruit say 'select', say 'forward' or 'back' to traverse over the list"</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Say 'finish' to complete your choice"</span><span class="p">)</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`We have </span><span class="si">${</span><span class="nx">fruits</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> fruit in our list. First is </span><span class="si">${</span><span class="nx">fruits</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">selectFruits</span><span class="p">,</span> <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="p">{</span> <span class="nx">index</span> <span class="o">:</span> <span class="mf">0</span><span class="p">}})</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Your favorite fruits are: </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`You have not chosen any fruit`</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">selectFruits</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">intent</span><span class="p">(</span><span class="s2">"(select|choice)"</span><span class="p">,</span>  <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">selected</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">p</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">fruits</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fruits</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">])</span>
        <span class="p">}</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">fruits</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" is selected"</span><span class="p">)</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">userData</span><span class="p">.</span><span class="nx">favorite</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="nx">intent</span><span class="p">(</span><span class="s2">"(repeat|say again)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">playFruit</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">))</span>

    <span class="nx">intent</span><span class="p">(</span><span class="s2">"(forward|next)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">fruits</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">;</span>
            <span class="nx">playFruit</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"It's the last fruit in the list"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="nx">intent</span><span class="p">(</span><span class="s2">"(back|previous)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">--</span><span class="p">;</span>
            <span class="nx">playFruit</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"It's the first fruit in the list"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="nx">intent</span><span class="p">(</span><span class="s2">"(finish|stop|it's all)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">())</span>

    <span class="nx">fallback</span><span class="p">(</span><span class="s2">"Say select to choose fruit, say forward or back to navigate through the list or say 'finish' to return"</span><span class="p">)</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">playFruit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Fruit number </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">+</span><span class="mf">1</span><span class="si">}</span><span class="sb"> is </span><span class="si">${</span><span class="nx">fruits</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="card-text">Here, the list of fruits is first saved to the <code class="docutils literal notranslate"><span class="pre">fruits</span></code> array. When the user says: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">want</span> <span class="pre">fruits</span></code>, Alan gives some instructions on how to pick fruits, names the first fruit in the list and activates the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context. The voice script execution stops until the user makes his or her choice and exits the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context by saying: <code class="docutils literal notranslate"><span class="pre">Finish|Stop|It's</span> <span class="pre">all</span></code>.</p>
<p class="card-text">In the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context, the user can select the named fruit, go forward or back with voice commands and tell Alan to stop iterating over the list. In the latter case, Alan exits the context, and we get back to executing the script in the initial voice command.</p>
<p class="card-text">The context also has the <a class="reference external" href="../server-api/contexts.html#prompting-and-handling-user-errors">fallback()</a> function to lock the user if the necessary answer is not given.</p>
<p class="card-text">To iterate over the list of fruits, the following Alan objects and variables are added to the script:</p>
<ul class="simple">
<li><p class="card-text"><a class="reference external" href="../server-api/objects.html#userdata">userData</a>: this variable can be used to store data that can be accessed between contexts. In this example, the user choice is saved to the <code class="docutils literal notranslate"><span class="pre">p.userData.favorites</span></code> array in the <code class="docutils literal notranslate"><span class="pre">selectFruit</span></code> context. The resulting list is played to the user after the user exits the context.</p></li>
<li><p class="card-text"><a class="reference external" href="../server-api/objects.html#state">state</a>: this is a special object that сan be used as a ‘dictionary’. In this example, the <code class="docutils literal notranslate"><span class="pre">state</span></code> object stores the index of the current element in the fruits array. When the context is activated, the index is set to 0, and the <code class="docutils literal notranslate"><span class="pre">state</span></code> object is passed to the context. With each new step forward or backward in the context, the index is incremented or decremented.</p></li>
</ul>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to sort items by price, name or category<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you are working with the item list, it is always a good idea provide the user with the ability to sort items by price, name or category. You can do it in the following way:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Cheese Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Double Cheese Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">12.00</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Bacon Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">11.50</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Hawaian Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">9.99</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Mexican Spicy Burger"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">12.50</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'burger'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Ceaser Salad"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">12.50</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'salad'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Garden Salad"</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">9.99</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">'salad'</span><span class="p">}</span>
<span class="p">];</span>

<span class="nx">intent</span><span class="p">(</span>
    <span class="s1">'(order|sort) by $(ORDER_BY name|price|category)'</span><span class="p">,</span>
    <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">orderBy</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">ORDER_BY</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">orderedMenuItems</span> <span class="o">=</span> <span class="nx">menuItems</span><span class="p">;</span>
        <span class="k">switch</span><span class="p">(</span><span class="nx">orderBy</span><span class="p">){</span>
            <span class="k">case</span> <span class="s1">'name'</span><span class="o">:</span>
                <span class="nx">orderedMenuItems</span> <span class="o">=</span> <span class="nx">menuItems</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">p2</span><span class="p">.</span><span class="nx">name</span><span class="p">));</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'price'</span><span class="o">:</span>
                <span class="nx">orderedMenuItems</span> <span class="o">=</span> <span class="nx">menuItems</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">price</span> <span class="o">-</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">price</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'category'</span><span class="o">:</span>
                <span class="nx">orderedMenuItems</span> <span class="o">=</span> <span class="nx">menuItems</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">category</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">p2</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">({</span><span class="nx">command</span><span class="o">:</span> <span class="s1">'getMenu'</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">orderedMenuItems</span><span class="p">});</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Here are the items ordered by </span><span class="si">${</span><span class="nx">orderBy</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">orderedMenuItems</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to pass information to the context<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you need to pass some information to the context, you can use the <a class="reference external" href="../server-api/objects.html#state">state</a> object. <code class="docutils literal notranslate"><span class="pre">state</span></code> is a kind of ‘dictionary’ where you can store any data you want.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s2">"I have friends"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"How many friends do you have?"</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">number</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">numberContext</span><span class="p">)</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"What is your friend's name number one?"</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">friends</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">list</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">friendsContext</span><span class="p">,</span> <span class="p">{</span><span class="nx">state</span><span class="o">:</span> <span class="p">{</span><span class="nx">number</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">friends</span><span class="p">}})</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">({</span><span class="nx">command</span><span class="o">:</span> <span class="s2">"friends"</span><span class="p">,</span> <span class="nx">list</span><span class="p">})</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">friendsContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">intent</span><span class="p">(</span><span class="s2">"$(NAME)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="p">{</span><span class="nx">number</span><span class="p">,</span> <span class="nx">friends</span><span class="p">}</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
        <span class="nx">friends</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">NAME</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span> <span class="o">==</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">friends</span><span class="p">)</span>
        <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`What is your friend's name number </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">index</span><span class="o">+</span><span class="mf">1</span><span class="si">}</span><span class="sb">?`</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">numberContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">intent</span><span class="p">(</span><span class="s2">"$(NUMBER)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">NUMBER</span><span class="p">.</span><span class="nx">number</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">NUMBER</span><span class="p">.</span><span class="nx">number</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"The number of friends must be one or more"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">})</span>
</pre></div>
</div>
<p class="card-text">In the example above, Alan gets the number of friends the user has and the friends’ names. Here we have a voice command: <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">have</span> <span class="pre">friends</span></code>, and two contexts that are activated from it:</p>
<ul class="simple">
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">numberContext</span></code> to get the number of friends from the user input</p></li>
<li><p class="card-text"><code class="docutils literal notranslate"><span class="pre">friendsContext</span></code> to create a list of friends the user has</p></li>
</ul>
<p class="card-text">When we activate the <code class="docutils literal notranslate"><span class="pre">friendsContext</span></code>, we are passing the following <code class="docutils literal notranslate"><span class="pre">state</span></code> object to it: <code class="docutils literal notranslate"><span class="pre">{state:</span> <span class="pre">{number,</span> <span class="pre">index,</span> <span class="pre">friends}}</span></code>.
<code class="docutils literal notranslate"><span class="pre">number</span></code> stands for the number of friends retrieved from the user input, <code class="docutils literal notranslate"><span class="pre">index</span></code> is used for iterating over the friends’ array and <code class="docutils literal notranslate"><span class="pre">friends</span></code> contains the list of friends. Once the number of friends in the array is equal to the number of friends defined in the user input, Alan exits the context, and a command with the list of friends is sent to the app.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to use voice commands with fuzzy parameters<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If you want Alan to recognize users’ commands that are close to those added to the voice script but are not 100% matching, you can use <a class="reference external" href="../server-api/slots.html#slots-with-fuzzy-matching">slots with fuzzy matching</a>. Add <code class="docutils literal notranslate"><span class="pre">~</span></code> after the slot name and define labels for each slot value.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"small"</span><span class="p">,</span> <span class="s2">"medium"</span><span class="p">,</span> <span class="s2">"large"</span><span class="p">];</span>
<span class="nx">intent</span><span class="p">(</span><span class="sb">`$(ORD~ one~1|first~1|two~2|second~2|middle~2|three~3|third~3|last~3)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// one is value, 1 is label</span>
    <span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">ORD</span><span class="p">.</span><span class="nx">label</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`You've selected </span><span class="si">${</span><span class="nx">array</span><span class="p">[</span><span class="nx">index</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
<p class="card-text">In the example above, the <code class="docutils literal notranslate"><span class="pre">ORD</span></code> slot labels are used as indices for values in <code class="docutils literal notranslate"><span class="pre">array</span></code>. In the Debugging Chat, try typing <code class="docutils literal notranslate"><span class="pre">one</span></code>, <code class="docutils literal notranslate"><span class="pre">two</span></code> or <code class="docutils literal notranslate"><span class="pre">last</span></code>. Alan will reply with a corresponding value from <code class="docutils literal notranslate"><span class="pre">array</span></code>. Then try making a slight mistake, for example, <code class="docutils literal notranslate"><span class="pre">thrird</span></code>. Alan will still be able to match the intent.</p>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to use several slots of the same type in one intent<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">You can add a slot of the same type to one intent several times. In this case, all slot values will be collected in an array with the following name: <code class="docutils literal notranslate"><span class="pre">SLOTNAME+s</span></code>, for example, <code class="docutils literal notranslate"><span class="pre">ITEMs</span></code>.</p>
<p class="card-text">For example, if you have several slots named <code class="docutils literal notranslate"><span class="pre">ITEM</span></code>, you can access the <code class="docutils literal notranslate"><span class="pre">ITEMs</span></code> object with an array of size 2 and you can reference the first item as <code class="docutils literal notranslate"><span class="pre">ITEMs[0]</span></code>.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span> <span class="s2">"cola"</span><span class="p">,</span> <span class="s2">"taco"</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>
<span class="nx">intent</span><span class="p">(</span><span class="sb">`I want $(NUMBER) $(ITEM </span><span class="si">${</span><span class="nx">items</span><span class="si">}</span><span class="sb">) and $(NUMBER) $(ITEM </span><span class="si">${</span><span class="nx">items</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">NUMBERs</span><span class="p">)),</span> <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">acc</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">ITEMs</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">NUMBERs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">number</span><span class="p">;</span> <span class="k">return</span> <span class="nx">acc</span><span class="p">},</span> <span class="p">{});</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">({</span><span class="nx">command</span><span class="o">:</span> <span class="s2">"createOrder"</span><span class="p">,</span> <span class="nx">order</span> <span class="p">});</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to make Alan use the plural form for nouns<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">To use the pluralizer in Alan, add the underscore character (<code class="docutils literal notranslate"><span class="pre">_</span></code>) to the necessary noun in the voice command.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="card-text">This syntax is not supported for irregular plural nouns.</p>
</div>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s2">"I want $(NUMBER) $(P cake_)"</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Here you are, </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">NUMBER</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">P</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to allow users to say synonyms for the same thing<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">It is often necessary to give the user an opportunity to say the same thing in several ways. For example, a product in the price list can be expressed differently, but we still must recognize which product the user is talking about. For these purposes, you can compile a synonym dictionary for each element and use fuzzy parameters in the voice command. Fuzzy parameters make it possible to associate a key with the value that is recognized as the user input.</p>
<p class="card-text">Consider the following example: we are constructing a list of slot values out of a JSON object. <code class="docutils literal notranslate"><span class="pre">aliases</span></code> become slot values and the <code class="docutils literal notranslate"><span class="pre">id</span></code> becomes the label.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">products</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">"cola"</span><span class="p">,</span>  <span class="nx">aliases</span><span class="o">:</span> <span class="p">[</span><span class="s2">"cola"</span><span class="p">,</span><span class="s2">"coca-cola"</span><span class="p">,</span> <span class="s2">"soda"</span><span class="p">,</span> <span class="s2">"coke"</span><span class="p">]},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">"juice"</span><span class="p">,</span> <span class="nx">aliases</span><span class="o">:</span> <span class="p">[</span><span class="s2">"juice"</span><span class="p">,</span> <span class="s2">"fresh"</span><span class="p">,</span> <span class="s2">"orange juice"</span><span class="p">,</span> <span class="s2">"orange fresh"</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1">// We have to construct following fuzzy parameters with all value~label items concatenated with |</span>
<span class="c1">// cola~cola|cola-cola~cola|soda~cola|coke~cola|juice~juice|fresh~juice|orange juice~juice|orange fresh~juice</span>

<span class="kd">const</span> <span class="nx">PROD_INTENTS</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">products</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">aliases</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span> <span class="p">=&gt;</span> <span class="sb">`</span><span class="si">${</span><span class="nx">a</span><span class="si">}</span><span class="sb">~</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">))).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)</span>

<span class="nx">intent</span><span class="p">(</span><span class="sb">`(I want|give me) $(ITEM </span><span class="si">${</span><span class="nx">PROD_INTENTS</span><span class="si">}</span><span class="sb">)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`We added </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">ITEM</span><span class="p">.</span><span class="nx">label</span><span class="si">}</span><span class="sb"> to your order`</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p class="card-text">Here is another example of how to construct a list of slot values out of the JSON object passed with <code class="docutils literal notranslate"><span class="pre">visualState</span></code>. In this example, we are using <a class="reference external" href="../server-api/dynamic-entities.html">dynamic entities</a> to get the user feedback. The list of slot values is constructed out of the values passed in the <code class="docutils literal notranslate"><span class="pre">synonyms</span></code> key, and the values in the <code class="docutils literal notranslate"><span class="pre">category</span></code> key are used as the label.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="c1">//Passed visualState</span>
<span class="p">{</span>
    <span class="s2">"answers"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"category"</span><span class="o">:</span> <span class="s2">"positive"</span><span class="p">,</span>
            <span class="s2">"synonyms"</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">"yes"</span><span class="p">,</span>
                <span class="s2">"of course"</span><span class="p">,</span>
                <span class="s2">"definitely"</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"category"</span><span class="o">:</span> <span class="s2">"negative"</span><span class="p">,</span>
            <span class="s2">"synonyms"</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">"no"</span><span class="p">,</span>
                <span class="s2">"in no case"</span><span class="p">,</span>
                <span class="s2">"I don't think so"</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"category"</span><span class="o">:</span> <span class="s2">"neutral"</span><span class="p">,</span>
            <span class="s2">"synonyms"</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">"maybe"</span><span class="p">,</span>
                <span class="s2">"I'll think about it"</span><span class="p">,</span>
                <span class="s2">"I don't know"</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="c1">// Voice script</span>
<span class="nx">onVisualState</span><span class="p">((</span><span class="nx">p</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">answers</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">answersEntity</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">answers</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ans</span> <span class="p">=&gt;</span> <span class="o">!</span><span class="nx">ans</span><span class="p">.</span><span class="nx">unique</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">ans</span> <span class="p">=&gt;</span> <span class="nx">ans</span><span class="p">.</span><span class="nx">synonyms</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">syn</span> <span class="p">=&gt;</span> <span class="nx">syn</span> <span class="o">+</span> <span class="s1">'~'</span> <span class="o">+</span> <span class="nx">ans</span><span class="p">.</span><span class="nx">category</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">answersEntity</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">intent</span><span class="p">(</span><span class="sb">`(My answer is|) $(ANS v:answersEntity)`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">ANS</span><span class="p">.</span><span class="nx">label</span><span class="p">){</span>
        <span class="k">case</span> <span class="s2">"positive"</span><span class="o">:</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`That's great!`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"negative"</span><span class="o">:</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Sorry to hear that`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"neutral"</span><span class="o">:</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`Thanks for sharing`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to respond differently based on the visual context<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">If your app has several views or screens, you may need Alan to respond differently to the same voice command when this or that view or screen is active. To do this, you can <a class="reference external" href="../client-api/methods/common-api.html#setvisualstate">set the visual state object</a> on the client side, and it will be available in <code class="docutils literal notranslate"><span class="pre">p.visual</span></code> object in the voice script when the user input matches the intent.</p>
<p class="card-text"><a class="reference external" href="list-all.html">Check our tutorials</a> to see how to send the visual state from apps on different platforms.</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="s1">'What can I do here?'</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
     <span class="k">switch</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">screen</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s2">"main"</span><span class="o">:</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Here is the main screen. Choose a category."</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"checkout"</span><span class="o">:</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"You are in the cart. You can update your order or checkout."</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">"product"</span><span class="o">:</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`It's the product details page for </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">product</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
           <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"Say open menu to start"</span><span class="p">);</span>
     <span class="p">}</span>
 <span class="p">})</span>
</pre></div>
</div>
<p class="card-text">You can also filter intents matching based on the visual state value. For example, this intent will never match if the cart is empty:</p>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="nx">intent</span><span class="p">(</span><span class="nx">visual</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">order</span><span class="p">)),</span> <span class="sb">`(What are|) my order details`</span><span class="p">,</span> <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">"You have ordered:"</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">product</span> <span class="k">in</span> <span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">visual</span><span class="p">.</span><span class="nx">order</span><span class="p">[</span><span class="nx">product</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">product</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</details><details class="sphinx-bs dropdown card mb-3 fade-in">
<summary class="summary-title card-header">
How to send a POST request from the voice script<div class="summary-down docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-down" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z" fill-rule="evenodd"></path></svg></div>
<div class="summary-up docutils">
<svg aria-hidden="true" class="octicon octicon-chevron-up" height="24" version="1.1" viewbox="0 0 24 24" width="24"><path d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z" fill-rule="evenodd"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<p class="card-text">You can send POST requests using the <a class="reference external" href="../server-api/built-in-javascript-libraries.html#working-with-api-calls">built-in axios and request HTTP clients</a>.</p>
<p class="card-text">In the example below, a POST request is made to get information about the opportunity status:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">COMPANIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Bird'</span><span class="p">,</span> <span class="s1">'Starbucks'</span><span class="p">,</span> <span class="s1">'Microsoft'</span><span class="p">,</span> <span class="s1">'Postmates'</span><span class="p">,</span> <span class="s1">'Wag'</span><span class="p">,</span> <span class="s1">'Apple'</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">'|'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">apiCall</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">param</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">jsp</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s2">"https://studio.alan.app/api_playground/"</span> <span class="o">+</span> <span class="nx">command</span><span class="p">,</span>
        <span class="nx">strictSSL</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
        <span class="nx">json</span><span class="o">:</span> <span class="nx">param</span><span class="p">,</span>
        <span class="nx">timeout</span><span class="o">:</span> <span class="mf">3000</span><span class="p">,</span>
    <span class="p">};</span>
    <span class="nx">api</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">jsp</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">body</span><span class="p">)=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="o">||</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mf">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">'(Sorry|) something went wrong (on the server|)'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="nx">intent</span><span class="p">(</span><span class="sb">`What is the $(T size|revenue|revenue status|status) of my (opportunity at|) $(COMP </span><span class="si">${</span><span class="nx">COMPANIES</span><span class="si">}</span><span class="sb">) (opportunity|)`</span><span class="p">,</span>
    <span class="sb">`What is (the|) $(COMP </span><span class="si">${</span><span class="nx">COMPANIES</span><span class="si">}</span><span class="sb">) $(T size|revenue|revenue status)`</span><span class="p">,</span>
       <span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">apiCall</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="s1">'sfdc_status'</span><span class="p">,</span> <span class="p">{</span><span class="nx">company</span><span class="o">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">COMP</span><span class="p">.</span><span class="nx">value</span><span class="p">},</span> <span class="p">(</span><span class="nx">body</span><span class="p">)=&gt;</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">`(Your|The|) opportunity </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">T</span><span class="si">}</span><span class="sb"> for </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">COMP</span><span class="si">}</span><span class="sb"> `</span><span class="p">,</span>
            <span class="sb">`The </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">T</span><span class="si">}</span><span class="sb"> of the </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">COMP</span><span class="si">}</span><span class="sb"> opportunity `</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="sb">` is $</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">revenue</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</details></div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="list-all.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Alan tutorials</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../client-api/methods/event-handler.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">onEvent handler</div>
                
              </div>
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
</div>

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/custom.js"></script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>